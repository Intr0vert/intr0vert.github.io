"use strict";(self["webpackChunkunicorn_banners"]=self["webpackChunkunicorn_banners"]||[]).push([[395],{8872:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ne}});var r=n(3396);const s=e=>((0,r.dD)("data-v-60264b2d"),e=e(),(0,r.Cn)(),e),a={class:"page-container"},o={class:"userEditorPage--header"},i=(0,r.Uk)(" Back "),d=s((()=>(0,r._)("h2",{class:"userEditorPage--title"},"Редактирование",-1)));function l(e,t,n,s,l,c){const u=(0,r.up)("ArrowLeftIcon"),p=(0,r.up)("AppButton"),m=(0,r.up)("UserEditor",!0),v=(0,r.up)("SimilarBanners"),h=(0,r.up)("MadeOrderBanner");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",o,[(0,r.Wm)(p,{color:"white"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{style:{marginRight:"13px"}}),i])),_:1}),d]),(0,r.Wm)(m,{style:{marginBottom:"146px"}}),(0,r.Wm)(v,{style:{marginBottom:"85px"}}),(0,r.Wm)(h)])}var c=n(6126),u=n(5573);const p=e=>((0,r.dD)("data-v-765ab42c"),e=e(),(0,r.Cn)(),e),m={class:"madeOrderBanner"},v=p((()=>(0,r._)("div",{class:"leftContent"}," Would like personalized banners for your company? ",-1))),h={class:"rightContent"},b=p((()=>(0,r._)("img",{src:c,width:"20",class:"icon"},null,-1))),w=(0,r.Uk)(" Learn more "),g=p((()=>(0,r._)("img",{src:u,width:"20",class:"icon"},null,-1))),_=(0,r.Uk)(" Make Order ");function y(e,t,n,s,a,o){const i=(0,r.up)("AppButton");return(0,r.wg)(),(0,r.iD)("div",m,[v,(0,r._)("div",h,[(0,r.Wm)(i,{outlinedThin:""},{default:(0,r.w5)((()=>[b,w])),_:1}),(0,r.Wm)(i,{color:"white"},{default:(0,r.w5)((()=>[g,_])),_:1})])])}var k=n(7661),f={components:{AppButton:k.Z}},C=n(89);const B=(0,C.Z)(f,[["render",y],["__scopeId","data-v-765ab42c"]]);var x=B,S=n(2207);const E=e=>((0,r.dD)("data-v-4a5f0608"),e=e(),(0,r.Cn)(),e),L={class:"similar_banners"},W=E((()=>(0,r._)("div",{class:"title"},"Similar banners:",-1))),z={key:0,class:"banners_list"},D={key:1,class:"banners_empty"},I=E((()=>(0,r._)("img",{src:S,alt:""},null,-1))),U=E((()=>(0,r._)("h3",null,"Нет похожих баннеров",-1))),Z=[I,U];function V(e,t,n,s,a,o){const i=(0,r.up)("BannerCard");return(0,r.wg)(),(0,r.iD)("div",L,[W,e.banners.length?((0,r.wg)(),(0,r.iD)("ul",z,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.banners,(e=>((0,r.wg)(),(0,r.j4)(i,{isSimilar:"",key:e.id,id:e.id,conversion:e.conversion,downloadsCount:e.downloadsCount,imgUrl:e.imgUrl},null,8,["id","conversion","downloadsCount","imgUrl"])))),128))])):((0,r.wg)(),(0,r.iD)("div",D,Z))])}var A=n(2621),F=n(4489),R=n(6169),j=n(6345),q={data:()=>({banners:[]}),setup(){return{appStore:(0,A.q)(),toaster:(0,R.P)(),generatedBannersStore:(0,F.d)()}},mounted(){this.init()},methods:{async getGeneratedBanners(){try{await this.generatedBannersStore.getGeneratedBanners()}catch(e){console.error(e),this.toaster.error("Не получилось загрузить баннеры :(")}},async init(){this.appStore.toggleAppLoader(!0),await this.getGeneratedBanners(),this.banners=this.generatedBannersStore.banners,this.banners.length=4,setTimeout((()=>{this.appStore.toggleAppLoader(!1)}),135)}},components:{BannerCard:j.Z}};const H=(0,C.Z)(q,[["render",V],["__scopeId","data-v-4a5f0608"]]);var O=H;const N={class:"userEditor--container"};function M(e,t,n,s,a,o){const i=(0,r.up)("UserEditorFields"),d=(0,r.up)("UserEditorHeader"),l=(0,r.up)("UserEditorCanvas"),c=(0,r.up)("UserEditorSizes");return(0,r.wg)(),(0,r.iD)("div",N,[(0,r.Wm)(i),(0,r._)("div",null,[(0,r.Wm)(d,{conversion:o.conversion,downloadsCount:o.downloadsCount},null,8,["conversion","downloadsCount"]),(0,r.Wm)(l)]),(0,r.Wm)(c)])}var P=n(9242);const $={class:"userEditorFields--wrapper"};function G(e,t,n,s,a,o){const i=(0,r.up)("InputWithLabel"),d=(0,r.up)("ColorsList"),l=(0,r.up)("WithLabel");return(0,r.wg)(),(0,r.iD)("div",$,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,P.iM)(((...t)=>e.submit&&e.submit(...t)),["prevent"])),novalidate:"",class:"userEditorFields--form"},[o.textLayers.header?((0,r.wg)(),(0,r.j4)(i,{key:0,modelValue:o.textLayers.header.text,"onUpdate:modelValue":t[0]||(t[0]=e=>o.textLayers.header.text=e),label:"Header",placeholder:"Header",type:"text",max:"54"},null,8,["modelValue"])):(0,r.kq)("",!0),o.textLayers.description?((0,r.wg)(),(0,r.j4)(i,{key:1,modelValue:o.textLayers.description.text,"onUpdate:modelValue":t[1]||(t[1]=e=>o.textLayers.description.text=e),label:"Description",placeholder:"Description",type:"text",max:"54"},null,8,["modelValue"])):(0,r.kq)("",!0),o.textLayers.buttonName?((0,r.wg)(),(0,r.j4)(i,{key:2,modelValue:o.textLayers.buttonName.text,"onUpdate:modelValue":t[2]||(t[2]=e=>o.textLayers.buttonName.text=e),label:"Button name",placeholder:"Button name",type:"text",max:"54"},null,8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(l,{label:"Brand color"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{colorList:a.colorList,modelValue:a.formData.color,"onUpdate:modelValue":t[3]||(t[3]=e=>a.formData.color=e)},null,8,["colorList","modelValue"])])),_:1})],32)])}var T=n(9093),K=n(2881),Y=n(6483),J=n(62);const Q=["#FFFFFF","#2467EC","#F8AC67","#25262C"];var X={setup(){return{bannersStore:(0,J.i)()}},data(){return{formData:{color:Q[0]},colorList:Q}},computed:{textLayers(){return this.bannersStore.getLayersByTitles(["header","description","buttonName"])}},components:{InputWithLabel:T.Z,WithLabel:K.Z,ColorsList:Y.Z}};const ee=(0,C.Z)(X,[["render",G],["__scopeId","data-v-bbfdb468"]]);var te=ee;const ne={class:"userEditor--header"},re={class:"userEditor--metrics"},se=(0,r.Uk)(" Download banner ");function ae(e,t,n,s,a,o){const i=(0,r.up)("StatisticBlock"),d=(0,r.up)("AppButton");return(0,r.wg)(),(0,r.iD)("div",ne,[(0,r._)("div",re,[n.downloadsCount||0===n.downloadsCount?((0,r.wg)(),(0,r.j4)(i,{key:0,view:"secondary",desciption:"Number of downloads",value:n.downloadsCount,valuePostscript:"times"},null,8,["value"])):(0,r.kq)("",!0),n.conversion||0===n.conversion?((0,r.wg)(),(0,r.j4)(i,{key:1,view:"secondary",desciption:"Conversion",value:n.conversion,valuePostscript:"%"},null,8,["value"])):(0,r.kq)("",!0)]),(0,r.Wm)(d,{color:"primary",style:{height:"auto"}},{default:(0,r.w5)((()=>[se])),_:1})])}var oe=n(7285),ie={props:{conversion:{required:!0,type:Number},downloadsCount:{required:!0,type:Number}},components:{AppButton:k.Z,StatisticBlock:oe.Z}};const de=(0,C.Z)(ie,[["render",ae],["__scopeId","data-v-0f6de119"]]);var le=de;const ce={class:"userEditor--canvas-wrapper",ref:"userEditorContainer"};function ue(e,t,n,s,a,o){const i=(0,r.up)("BannerCanvas");return(0,r.wg)(),(0,r.iD)("div",ce,["success"===o.bannerStatus?((0,r.wg)(),(0,r.j4)(i,{key:0,canvas:o.canvasItem,scheme:o.banner?.schemes[0]?.id,banner:o.banner,zoom:a.canvasWidth/o.canvasItem.width,rounded:""},null,8,["canvas","scheme","banner","zoom"])):(0,r.kq)("",!0)],512)}var pe=n(8334),me={setup(){return{bannersStore:(0,J.i)()}},data(){return{canvasWidth:0,canvasResizeObserver:null}},computed:{banner(){return this.bannersStore.banner.data},bannerStatus(){return this.bannersStore.banner.status},canvasItem(){return this.bannersStore.canvases[0]}},mounted(){this.init(),this.calculateCanvasWidth()},methods:{init(){this.canvasResizeObserver=new ResizeObserver((e=>{for(let t of e)this.canvasWidth=t.contentRect.width})),this.canvasResizeObserver.observe(this.$refs.userEditorContainer)},calculateCanvasWidth(){this.canvasWidth=this.$refs.userEditorContainer.offsetWidth}},beforeUnmount(){this.canvasResizeObserver.disconnect()},components:{BannerCanvas:pe.Z}};const ve=(0,C.Z)(me,[["render",ue],["__scopeId","data-v-0aec4b4e"]]);var he=ve,be=n(7139);const we=e=>((0,r.dD)("data-v-5696e6e0"),e=e(),(0,r.Cn)(),e),ge=we((()=>(0,r._)("h3",{class:"userEditor--sizesLabel"},"Под какие размеры нужен баннер?",-1))),_e={class:"userEditor--sizesList"},ye={class:"userEditor--sizesItem-image-wrapper"},ke={class:"userEditor--sizesItem-info"},fe=we((()=>(0,r._)("div",{class:"label"},"подходит для",-1))),Ce={class:"userEditor--sizesItem-name"},Be={class:"userEditor--sizesItem-size label"};function xe(e,t,n,s,a,o){const i=(0,r.up)("AppCheckbox"),d=(0,r.up)("AppIcon");return(0,r.wg)(),(0,r.iD)("div",null,[ge,(0,r._)("div",_e,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.sizes,(({checked:e,title:t,height:n,width:s},a)=>((0,r.wg)(),(0,r.iD)("div",{class:"userEditor--sizesItem",key:a},[(0,r.Wm)(i,{hideValue:!0,modelValue:e,"onUpdate:modelValue":e=>o.checkSize(a,e)},null,8,["modelValue","onUpdate:modelValue"]),(0,r._)("div",ye,[(0,r._)("div",{class:"userEditor--sizesItem-image",style:(0,be.j5)({"--sizeItem-image-width":o.getWidthByRatio(s/n),"--sizeItem-image-height":o.getHeightByRatio(s/n)})},[(0,r.Wm)(d,{icon:"gallery-bold",size:20})],4)]),(0,r._)("div",ke,[fe,(0,r._)("h4",Ce,(0,be.zw)(t),1),(0,r._)("div",Be,(0,be.zw)(`${s}x${n}`),1)])])))),128))])])}var Se=n(5109),Ee={setup(){return{bannersStore:(0,J.i)()}},methods:{checkSize(e,t){this.sizes[e].checked=t},getWidthByRatio(e){return e<1?"36px":"64px"},getHeightByRatio(e){return e>1?"36px":"64px"}},computed:{sizes(){return this.bannersStore.canvases}},components:{AppCheckbox:Se.Z}};const Le=(0,C.Z)(Ee,[["render",xe],["__scopeId","data-v-5696e6e0"]]);var We=Le,ze={setup(){return{bannersStore:(0,J.i)()}},mounted(){this.init()},computed:{conversion(){return this.bannersStore.conversion},downloadsCount(){return this.bannersStore.downloadsCount}},methods:{async init(){const e=this.$route.params?.id;await this.bannersStore.getBanner(e)}},components:{UserEditorFields:te,UserEditorHeader:le,UserEditorCanvas:he,UserEditorSizes:We}};const De=(0,C.Z)(ze,[["render",M],["__scopeId","data-v-046d9cfc"]]);var Ie=De;const Ue={width:"13",height:"8",viewBox:"0 0 13 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ze=(0,r._)("path",{d:"M3.56055 6.12L1.00055 3.56L3.56055 1",stroke:"#25262C","stroke-width":"2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ve=(0,r._)("path",{d:"M11.2402 3.5625H1.07023",stroke:"#25262C","stroke-width":"2","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ae=[Ze,Ve];function Fe(e,t){return(0,r.wg)(),(0,r.iD)("svg",Ue,Ae)}const Re={},je=(0,C.Z)(Re,[["render",Fe]]);var qe=je,He={components:{AppButton:k.Z,ArrowLeftIcon:qe,MadeOrderBanner:x,SimilarBanners:O,UserEditor:Ie}};const Oe=(0,C.Z)(He,[["render",l],["__scopeId","data-v-60264b2d"]]);var Ne=Oe}}]);
//# sourceMappingURL=userEditor.4f75e55d.js.map